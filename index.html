<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Richard Basile</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Richard Basile">
<meta property="og:url" content="http://richardbasile.com/index.html">
<meta property="og:site_name" content="Richard Basile">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Richard Basile">
<meta name="twitter:creator" content="@WildCardRunning">
  
    <link rel="alternate" href="/atom.xml" title="Richard Basile" type="application/atom+xml">
  
  
    <link rel="icon" href="/images/cloud.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Richard Basile</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/resume">Resume</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://richardbasile.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-AWS-Environment-Script" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/25/AWS-Environment-Script/" class="article-date">
  <time datetime="2019-01-25T09:27:53.000Z" itemprop="datePublished">2019-01-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/25/AWS-Environment-Script/">AWS Environment Script</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>The following script can be used to source your AWS environment variables and make it easy to switch between AWS profiles. This is especially useful when you have to switch between AWS accounts frequently. The script requires that you use profiles which are set up using <code>aws configure --profile</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">display_usage() &#123;</span><br><span class="line">  echo &quot;Usage : . aws.sh &lt;profile&gt;&quot;</span><br><span class="line">  echo &quot;&quot;</span><br><span class="line">  echo &quot;Note: An aws profile may be created using:&quot;</span><br><span class="line">  echo &quot;  aws configure --profile&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">echo &quot;&quot;</span><br><span class="line"></span><br><span class="line"># check script is sourced</span><br><span class="line">if [[ $0 != &quot;-bash&quot; ]]; then</span><br><span class="line">	echo &quot;Script must be sourced!&quot;</span><br><span class="line">	echo &quot;&quot;</span><br><span class="line">	display_usage</span><br><span class="line">	exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># check parameters</span><br><span class="line">if [[ &quot;$@&quot; == &quot;&quot; ]]</span><br><span class="line">then </span><br><span class="line">	echo &quot;Insufficient parameters!&quot;</span><br><span class="line">	echo &quot;&quot;</span><br><span class="line">	display_usage</span><br><span class="line">	return 1</span><br><span class="line">fi </span><br><span class="line"> </span><br><span class="line"># check if user requested help</span><br><span class="line">if [[ ( &quot;$@&quot; == &quot;--help&quot;) || &quot;$@&quot; == &quot;-h&quot; ]] </span><br><span class="line">then </span><br><span class="line">	display_usage</span><br><span class="line">	return 0</span><br><span class="line">fi </span><br><span class="line"></span><br><span class="line">profile=$1</span><br><span class="line"></span><br><span class="line"># check if profile exists</span><br><span class="line">aws configure list --profile $&#123;profile&#125; &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">if [[ $? != 0 ]]; then</span><br><span class="line">	echo &quot;Profile $&#123;profile&#125; not found!&quot;</span><br><span class="line">	return 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo &quot;Configuring environment for $&#123;profile&#125;&quot;</span><br><span class="line"></span><br><span class="line">export AWS_DEFAULT_REGION=$(aws configure get $&#123;profile&#125;.region)</span><br><span class="line">export AWS_ACCESS_KEY_ID=$(aws configure get $&#123;profile&#125;.aws_access_key_id)</span><br><span class="line">export AWS_SECRET_ACCESS_KEY=$(aws configure get $&#123;profile&#125;.aws_secret_access_key)</span><br><span class="line"></span><br><span class="line">env | grep AWS</span><br><span class="line">echo &quot;Done!&quot;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://richardbasile.com/2019/01/25/AWS-Environment-Script/" data-id="cjwhr4f34000293m4v6e2udv9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aws/">aws</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-first" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/22/first/" class="article-date">
  <time datetime="2019-01-22T22:10:52.000Z" itemprop="datePublished">2019-01-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/22/first/">first</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>It wonâ€™t be the last.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://richardbasile.com/2019/01/22/first/" data-id="cjwhr4f30000093m4ufedg16j" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blog/">blog</a></li></ul>

    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/aws/">aws</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/aws/" style="font-size: 10px;">aws</a> <a href="/tags/blog/" style="font-size: 10px;">blog</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/01/25/AWS-Environment-Script/">AWS Environment Script</a>
          </li>
        
          <li>
            <a href="/2019/01/22/first/">first</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Richard Basile<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/resume" class="mobile-nav-link">Resume</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>